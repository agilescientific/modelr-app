{% extends "base_template.html" %} 
{% block title %}Modelr &middot; Section model{% endblock %} 

{% block content %}

<div ng-cloak class="container" ng-controller="2DCtrl">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Model</h3>
    </div>

    <div class="panel-body">
      <div class="col-xs-12 col-sm-7">

	<!-- INFO POPOVER & BUTTONS-->
	<div class="col-xs-12 bottom-buffer">

	  <!-- INFO SPAN -->
	  <span title="{[popover.title]}" data-content="{[popover.content]}"
	        class="glyphicon glyphicon-info-sign model_info" data-animation="am-flip-x"
	        data-auto-close="1" data-trigger="hover" bs-popover>
	  </span>

	  <!-- BUTTONS -->
	  <form style="float:right;" action="{{upload_url}}" method="POST" enctype="multipart/form-data">
	    <div style='height: 0px;width:0px; overflow:hidden;'>
	      <input type="submit" name="submit" value="Submit" id="submit">
	      <input id="file" type="file" name="file" ng-model="file" onchange="$('#submit').click()"/>
	    </div>
	    <div class="btn btn-info" id="upload_btn" onclick="$('#file').click()">
	      Upload image
	    </div> 
	    <button type="button" class="btn btn-info" 
		    onclick="window.location.href='/model_builder'">
	      Make a wedge
	    </button>
	  </form>
	</div>

	<!-- IMAGE SLIDER -->
	<div class="col-xs-12 container">
	  <flex-slider after="slideClick($slider)" flex-slide="s in images track by $index" slideshow="false">
	    <li>
	      <img ng-src="{[s.image]}">
	    </li>
	  </flex-slider>
	</div>
      </div>
      <div class="col-xs-12 col-sm-5">
	<div class="panel panel-default">
	  <div class="panel-heading">
	    <h3 class="panel-title">Assign rocks to the model framework</h3>
	  </div>
	  <div class="panel-body">

	    <!-- PRELOADED MODELS -->
	    <button type="button" class="btn btn-default col-xs-12 model_select" placeholder="Load saved earth model"
                    placement="bottom-right" ng-model="savedEarthModel" bs-options="item.name for item in curImage.earth_models" bs-select>
	      Action<span class="caret"></span>
	    </button>

	    <!-- LOADED ROCKS -->
	    <div ng-repeat="item in curImage.rocks track by $index">
	      <div class="rock-color col-xs-2" ng-style="{'background-color': curImage.colours[$index]}"></div>
	      <button type="button" placeholder="{[item.name]}" class="btn btn-default col-xs-9 model_select" placement="bottom-right" ng-model="item" bs-options="rock.name for rock in rocks" bs-select>
		<span class="caret"></span>
	      </button>
	    </div>
	  </div>
	</div>
    	<div class="panel panel-default">
	  <div class="panel-heading">
	    <h3 class="panel-title">Define the physical limits, domain, and reflectivity model of the earth</h3>
	  </div>
	  <div class="panel-body">
	    <div class="col-xs-6 remove-padding">
	      <h4><span class="label label-default">z-axis domain</span></h4>
	    </div>
	    <div class="col-xs-5 col-xs-offset-1 remove-padding">
	      <button type="button" class="form-control btn btn-default col-xs-10 model_select" placement="bottom-right" ng-model="zAxisDomain" bs-options="type for type in zDomain" bs-select>
		<span class="caret"></span>
	      </button>
	    </div>
	    <div class="col-xs-7 remove-padding">
	      <h4><span class="label label-default">z-range of model</span></h4>
	    </div>
	    <div class="col-xs-4 col-xs-offset-1 remove-padding">
	      <input class="form-control col-xs-8" ng-model="zRange" type="number" min="1"/>
	    </div>
	    <div class="col-xs-7 remove-padding">
	      <input class="form-control" type="text" placeholder="Earth model name" ng-model="earthModelName"/>
	    </div>
	    <div class="col-xs-4 col-xs-offset-1 remove-padding">
	      <button type="button" ng-click="saveModel()" class="btn btn-primary col-xs-12" title="{[alert.title]}" data-content="{[alert.content]}" data-placement="top-right" data-type="success" data-container="body" bs-alert>Save</button>
	    </div>
	  </div>
	</div>
	<div class="col-xs-6 remove-padding">
	  <button type="button" ng-click="updatePlot()" class="btn btn-primary col-xs-12">Update Plot</button>
	</div>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Result</h3>
    </div>
    <div class="panel-body">
      <div class="col-xs-6 vd_plot remove-padding"></div>
      <div class="col-xs-3 og_plot remove-padding"></div>
      <div class="col-xs-3 wg_plot remove-padding"></div>
    </div>
  </div>
</div>
{% endblock %}
